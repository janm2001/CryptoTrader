<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:CryptoTrader.App.ViewModels"
        x:Class="CryptoTrader.App.MainWindow"
        x:DataType="vm:MainViewModel"
        Title="CryptoTrader"
        Width="1280" Height="720"
        MinWidth="900" MinHeight="600"
        WindowStartupLocation="CenterScreen"
        Background="#1a1a2e">
    
    <Window.DataContext>
        <vm:MainViewModel/>
    </Window.DataContext>

    <Window.Styles>
        <Style Selector="Button">
            <Setter Property="Background" Value="#4a4a6a"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="15,10"/>
            <Setter Property="CornerRadius" Value="5"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
        <Style Selector="Button:pointerover">
            <Setter Property="Background" Value="#5a5a8a"/>
        </Style>
        <Style Selector="Button.primary">
            <Setter Property="Background" Value="#6c5ce7"/>
        </Style>
        <Style Selector="Button.primary:pointerover">
            <Setter Property="Background" Value="#7c6cf7"/>
        </Style>
        <Style Selector="Button.success">
            <Setter Property="Background" Value="#00b894"/>
        </Style>
        <Style Selector="Button.danger">
            <Setter Property="Background" Value="#d63031"/>
        </Style>
        <Style Selector="Button.nav">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="Padding" Value="20,15"/>
        </Style>
        <Style Selector="Button.nav:pointerover">
            <Setter Property="Background" Value="#2d2d4a"/>
        </Style>
        <Style Selector="TextBox">
            <Setter Property="Background" Value="#2d2d4a"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#4a4a6a"/>
            <Setter Property="Padding" Value="10"/>
            <Setter Property="CornerRadius" Value="5"/>
        </Style>
        <Style Selector="TextBlock">
            <Setter Property="Foreground" Value="White"/>
        </Style>
        <Style Selector="CheckBox">
            <Setter Property="Foreground" Value="White"/>
        </Style>
        <Style Selector="RadioButton">
            <Setter Property="Foreground" Value="White"/>
        </Style>
        <Style Selector="DataGrid">
            <Setter Property="Background" Value="#1e1e3a"/>
            <Setter Property="BorderBrush" Value="#3a3a5a"/>
        </Style>
        <Style Selector="DataGridColumnHeader">
            <Setter Property="Background" Value="#2d2d4a"/>
            <Setter Property="Foreground" Value="#a0a0c0"/>
            <Setter Property="Padding" Value="10"/>
        </Style>
        <Style Selector="DataGridCell">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="10"/>
        </Style>
    </Window.Styles>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Left Navigation Panel -->
        <Border Grid.Column="0" 
                Background="#16162a" 
                Width="220"
                IsVisible="{Binding ShowNavigation}">
            <DockPanel>
                <StackPanel DockPanel.Dock="Top" Margin="20">
                    <TextBlock Text="â‚¿ CryptoTrader" 
                               FontSize="22" 
                               FontWeight="Bold"
                               Foreground="#6c5ce7"/>
                    <TextBlock Text="{Binding CurrentUsername}" 
                               FontSize="12" 
                               Foreground="#808090"
                               Margin="0,5,0,0"/>
                </StackPanel>

                <StackPanel DockPanel.Dock="Top" Margin="0,10,0,0">
                    <Button Classes="nav" Click="NavigateToDashboard">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="ðŸ“Š" FontSize="18" Margin="0,0,10,0"/>
                            <TextBlock Text="{Binding L[Dashboard]}" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>
                    <Button Classes="nav" Click="NavigateToPortfolio">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="ðŸ’¼" FontSize="18" Margin="0,0,10,0"/>
                            <TextBlock Text="{Binding L[Portfolio]}" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>
                    <Button Classes="nav" Click="NavigateToMarket">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="ðŸ“ˆ" FontSize="18" Margin="0,0,10,0"/>
                            <TextBlock Text="{Binding L[Market]}" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>
                    <Button Classes="nav" Click="NavigateToTransactions">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="ðŸ“‹" FontSize="18" Margin="0,0,10,0"/>
                            <TextBlock Text="{Binding L[Transactions]}" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>
                    <Button Classes="nav" Click="NavigateToSettings">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="âš™ï¸" FontSize="18" Margin="0,0,10,0"/>
                            <TextBlock Text="{Binding L[Settings]}" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>
                    <Button Classes="nav" Click="NavigateToAdmin" IsVisible="{Binding IsAdmin}">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="ðŸ”" FontSize="18" Margin="0,0,10,0"/>
                            <TextBlock Text="{Binding L[Admin]}" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>
                </StackPanel>

                <Button Classes="nav" DockPanel.Dock="Bottom" Click="OnLogout" Margin="0,0,0,20">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="ðŸšª" FontSize="18" Margin="0,0,10,0"/>
                        <TextBlock Text="Logout" VerticalAlignment="Center"/>
                    </StackPanel>
                </Button>
                <Border/>
            </DockPanel>
        </Border>

        <!-- Main Content -->
        <Border Grid.Column="1" Background="#1a1a2e">
            <Grid>
                <!-- Loading -->
                <Border Background="#80000000" IsVisible="{Binding IsLoading}" ZIndex="100">
                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                        <TextBlock Text="Loading..." FontSize="18" Foreground="White"/>
                    </StackPanel>
                </Border>

                <!-- Status -->
                <Border Background="#ff6b6b" Padding="10" IsVisible="{Binding HasStatusMessage}"
                        VerticalAlignment="Top" ZIndex="50" Margin="20,10">
                    <TextBlock Text="{Binding StatusMessage}" Foreground="White" HorizontalAlignment="Center"/>
                </Border>

                <!-- LOGIN VIEW -->
                <Border IsVisible="{Binding ShowLoginView}" Padding="40">
                    <Grid VerticalAlignment="Center" HorizontalAlignment="Center">
                        <Border Background="#16162a" CornerRadius="10" Padding="40" Width="400">
                            <StackPanel>
                                <TextBlock Text="â‚¿ CryptoTrader" FontSize="28" FontWeight="Bold"
                                           Foreground="#6c5ce7" HorizontalAlignment="Center" Margin="0,0,0,30"/>

                                <!-- Login Form -->
                                <StackPanel IsVisible="{Binding ShowLoginForm}">
                                    <TextBlock Text="Login" FontSize="20" FontWeight="SemiBold"
                                               HorizontalAlignment="Center" Margin="0,0,0,20"/>
                                    <TextBlock Text="Username" Margin="0,0,0,5"/>
                                    <TextBox Text="{Binding LoginUsername}" Watermark="Username" Margin="0,0,0,15"/>
                                    <TextBlock Text="Password" Margin="0,0,0,5"/>
                                    <TextBox Text="{Binding LoginPassword}" PasswordChar="â€¢" Watermark="Password" Margin="0,0,0,15"/>
                                    <CheckBox Content="Remember me" IsChecked="{Binding LoginRememberMe}" Margin="0,0,0,20"/>
                                    <Button Classes="primary" Content="Login" HorizontalAlignment="Stretch"
                                            Click="OnLogin" Margin="0,0,0,15"/>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                        <TextBlock Text="No account?" Margin="0,0,5,0"/>
                                        <Button Content="Register" Classes="nav" Padding="0"
                                                Foreground="#6c5ce7" Click="ShowRegister"/>
                                    </StackPanel>
                                </StackPanel>

                                <!-- Register Form -->
                                <StackPanel IsVisible="{Binding ShowRegisterForm}">
                                    <TextBlock Text="Register" FontSize="20" FontWeight="SemiBold"
                                               HorizontalAlignment="Center" Margin="0,0,0,20"/>
                                    <TextBlock Text="Username" Margin="0,0,0,5"/>
                                    <TextBox Text="{Binding RegisterUsername}" Watermark="Username" Margin="0,0,0,10"/>
                                    <TextBlock Text="Email" Margin="0,0,0,5"/>
                                    <TextBox Text="{Binding RegisterEmail}" Watermark="email@example.com" Margin="0,0,0,10"/>
                                    <TextBlock Text="Password" Margin="0,0,0,5"/>
                                    <TextBox Text="{Binding RegisterPassword}" PasswordChar="â€¢" Watermark="Password" Margin="0,0,0,10"/>
                                    <TextBlock Text="Confirm Password" Margin="0,0,0,5"/>
                                    <TextBox Text="{Binding RegisterConfirmPassword}" PasswordChar="â€¢" Watermark="Confirm" Margin="0,0,0,20"/>
                                    <Button Classes="primary" Content="Register" HorizontalAlignment="Stretch"
                                            Click="OnRegister" Margin="0,0,0,15"/>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                        <TextBlock Text="Have an account?" Margin="0,0,5,0"/>
                                        <Button Content="Login" Classes="nav" Padding="0"
                                                Foreground="#6c5ce7" Click="ShowLogin"/>
                                    </StackPanel>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </Grid>
                </Border>

                <!-- DASHBOARD VIEW -->
                <ScrollViewer IsVisible="{Binding ShowDashboardView}" Padding="30">
                    <StackPanel>
                        <TextBlock Text="Dashboard" FontSize="28" FontWeight="Bold" Margin="0,0,0,20"/>
                        <WrapPanel Margin="0,0,0,30">
                            <Border Background="#2d2d4a" CornerRadius="10" Padding="25" Margin="0,0,15,15" Width="280">
                                <StackPanel>
                                    <TextBlock Text="Total Value" Foreground="#808090" FontSize="14"/>
                                    <TextBlock Text="{Binding TotalPortfolioValueFormatted}" FontSize="32" FontWeight="Bold" Margin="0,10,0,0"/>
                                </StackPanel>
                            </Border>
                            <Border Background="#2d2d4a" CornerRadius="10" Padding="25" Margin="0,0,15,15" Width="280">
                                <StackPanel>
                                    <TextBlock Text="Total Profit/Loss" Foreground="#808090" FontSize="14"/>
                                    <TextBlock Text="{Binding TotalProfitLossFormatted}" FontSize="32" FontWeight="Bold" Margin="0,10,0,0"/>
                                    <TextBlock Text="{Binding TotalProfitLossPercentageFormatted}" FontSize="14"/>
                                </StackPanel>
                            </Border>
                        </WrapPanel>
                        <TextBlock Text="Market Overview" FontSize="20" FontWeight="SemiBold" Margin="0,0,0,15"/>
                        <Border Background="#16162a" CornerRadius="10" Padding="5">
                            <DataGrid ItemsSource="{Binding CryptoPrices}" AutoGenerateColumns="False" IsReadOnly="True" Height="350">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="#" Binding="{Binding MarketCapRank}" Width="50"/>
                                    <DataGridTextColumn Header="Name" Binding="{Binding Name}" Width="150"/>
                                    <DataGridTextColumn Header="Symbol" Binding="{Binding Symbol}" Width="80"/>
                                    <DataGridTextColumn Header="Price" Binding="{Binding CurrentPrice, StringFormat=\{0:C2\}}" Width="120"/>
                                    <DataGridTextColumn Header="24h %" Binding="{Binding PriceChangePercentage24h, StringFormat=\{0:N2\}%}" Width="100"/>
                                    <DataGridTextColumn Header="Market Cap" Binding="{Binding MarketCap, StringFormat=\{0:N0\}}" Width="150"/>
                                </DataGrid.Columns>
                            </DataGrid>
                        </Border>
                        <StackPanel Orientation="Horizontal" Margin="0,20,0,0">
                            <Button Classes="primary" Content="Refresh" Click="OnRefreshDashboard" Margin="0,0,10,0"/>
                            <Button Classes="success" Content="Export to Excel" Click="OnExportPrices"/>
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>

                <!-- PORTFOLIO VIEW -->
                <ScrollViewer IsVisible="{Binding ShowPortfolioView}" Padding="30">
                    <StackPanel>
                        <Grid Margin="0,0,0,20">
                            <TextBlock Text="My Holdings" FontSize="28" FontWeight="Bold" VerticalAlignment="Center"/>
                            <Button Classes="primary" Content="Add Holding" HorizontalAlignment="Right" Click="OnShowAddHolding"/>
                        </Grid>
                        <WrapPanel Margin="0,0,0,20">
                            <Border Background="#2d2d4a" CornerRadius="10" Padding="20" Margin="0,0,15,0" Width="250">
                                <StackPanel>
                                    <TextBlock Text="Total Value" Foreground="#808090" FontSize="12"/>
                                    <TextBlock Text="{Binding TotalPortfolioValueFormatted}" FontSize="24" FontWeight="Bold"/>
                                </StackPanel>
                            </Border>
                            <Border Background="#2d2d4a" CornerRadius="10" Padding="20" Width="250">
                                <StackPanel>
                                    <TextBlock Text="Profit/Loss" Foreground="#808090" FontSize="12"/>
                                    <TextBlock Text="{Binding TotalProfitLossFormatted}" FontSize="24" FontWeight="Bold"/>
                                </StackPanel>
                            </Border>
                        </WrapPanel>

                        <!-- Add Holding Form -->
                        <Border Background="#2d2d4a" CornerRadius="10" Padding="20" Margin="0,0,0,20" IsVisible="{Binding ShowAddHoldingForm}">
                            <StackPanel>
                                <TextBlock Text="Add New Holding" FontSize="18" FontWeight="SemiBold" Margin="0,0,0,15"/>
                                <Grid ColumnDefinitions="*,*,*,*" RowDefinitions="Auto">
                                    <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                        <TextBlock Text="Coin ID" FontSize="12" Margin="0,0,0,5"/>
                                        <TextBox Text="{Binding NewHoldingCoinId}" Watermark="bitcoin"/>
                                    </StackPanel>
                                    <StackPanel Grid.Column="1" Margin="0,0,10,0">
                                        <TextBlock Text="Symbol" FontSize="12" Margin="0,0,0,5"/>
                                        <TextBox Text="{Binding NewHoldingSymbol}" Watermark="BTC"/>
                                    </StackPanel>
                                    <StackPanel Grid.Column="2" Margin="0,0,10,0">
                                        <TextBlock Text="Amount" FontSize="12" Margin="0,0,0,5"/>
                                        <TextBox Text="{Binding NewHoldingAmount}" Watermark="0.5"/>
                                    </StackPanel>
                                    <StackPanel Grid.Column="3">
                                        <TextBlock Text="Purchase Price" FontSize="12" Margin="0,0,0,5"/>
                                        <TextBox Text="{Binding NewHoldingPurchasePrice}" Watermark="50000"/>
                                    </StackPanel>
                                </Grid>
                                <StackPanel Orientation="Horizontal" Margin="0,15,0,0">
                                    <Button Classes="success" Content="Save" Click="OnAddHolding" Margin="0,0,10,0"/>
                                    <Button Content="Cancel" Click="OnCancelAddHolding"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>

                        <Border Background="#16162a" CornerRadius="10" Padding="5">
                            <DataGrid ItemsSource="{Binding Holdings}" AutoGenerateColumns="False" IsReadOnly="True" MinHeight="300">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="Coin" Binding="{Binding CoinId}" Width="120"/>
                                    <DataGridTextColumn Header="Symbol" Binding="{Binding Symbol}" Width="80"/>
                                    <DataGridTextColumn Header="Amount" Binding="{Binding Amount, StringFormat=\{0:N4\}}" Width="100"/>
                                    <DataGridTextColumn Header="Purchase Price" Binding="{Binding PurchasePrice, StringFormat=\{0:C2\}}" Width="120"/>
                                    <DataGridTextColumn Header="Date" Binding="{Binding PurchaseDate, StringFormat=\{0:yyyy-MM-dd\}}" Width="120"/>
                                </DataGrid.Columns>
                            </DataGrid>
                        </Border>
                        <StackPanel Orientation="Horizontal" Margin="0,20,0,0">
                            <Button Classes="primary" Content="Refresh" Click="OnRefreshPortfolio" Margin="0,0,10,0"/>
                            <Button Classes="success" Content="Export Holdings" Click="OnExportHoldings"/>
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>

                <!-- MARKET VIEW -->
                <ScrollViewer IsVisible="{Binding ShowMarketView}" Padding="30">
                    <StackPanel>
                        <TextBlock Text="Crypto Market" FontSize="28" FontWeight="Bold" Margin="0,0,0,20"/>
                        <Grid ColumnDefinitions="*,Auto" Margin="0,0,0,20">
                            <TextBox Grid.Column="0" Text="{Binding SearchQuery}" Watermark="Search crypto..." Margin="0,0,10,0"/>
                            <Button Grid.Column="1" Classes="primary" Content="Search" Click="OnSearchCrypto"/>
                        </Grid>
                        <Border Background="#16162a" CornerRadius="10" Padding="5">
                            <DataGrid ItemsSource="{Binding CryptoPrices}" SelectedItem="{Binding SelectedCrypto}"
                                      AutoGenerateColumns="False" IsReadOnly="True" MinHeight="450">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="#" Binding="{Binding MarketCapRank}" Width="50"/>
                                    <DataGridTextColumn Header="Name" Binding="{Binding Name}" Width="150"/>
                                    <DataGridTextColumn Header="Symbol" Binding="{Binding Symbol}" Width="80"/>
                                    <DataGridTextColumn Header="Price" Binding="{Binding CurrentPrice, StringFormat=\{0:C2\}}" Width="120"/>
                                    <DataGridTextColumn Header="24h %" Binding="{Binding PriceChangePercentage24h, StringFormat=\{0:N2\}%}" Width="100"/>
                                    <DataGridTextColumn Header="Market Cap" Binding="{Binding MarketCap, StringFormat=\{0:N0\}}" Width="140"/>
                                    <DataGridTextColumn Header="Volume" Binding="{Binding TotalVolume, StringFormat=\{0:N0\}}" Width="140"/>
                                </DataGrid.Columns>
                            </DataGrid>
                        </Border>
                        <StackPanel Orientation="Horizontal" Margin="0,20,0,0">
                            <Button Classes="primary" Content="Refresh" Click="OnRefreshMarket" Margin="0,0,10,0"/>
                            <Button Classes="success" Content="Export Prices" Click="OnExportPrices"/>
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>

                <!-- TRANSACTIONS VIEW -->
                <ScrollViewer IsVisible="{Binding ShowTransactionsView}" Padding="30">
                    <StackPanel>
                        <Grid Margin="0,0,0,20">
                            <TextBlock Text="Transaction History" FontSize="28" FontWeight="Bold" VerticalAlignment="Center"/>
                            <Button Classes="primary" Content="Add Transaction" HorizontalAlignment="Right" Click="OnShowAddTransaction"/>
                        </Grid>

                        <!-- Add Transaction Form -->
                        <Border Background="#2d2d4a" CornerRadius="10" Padding="20" Margin="0,0,0,20" IsVisible="{Binding ShowAddTransactionForm}">
                            <StackPanel>
                                <TextBlock Text="Add Transaction" FontSize="18" FontWeight="SemiBold" Margin="0,0,0,15"/>
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,15">
                                    <RadioButton Content="Buy" IsChecked="{Binding NewTransactionIsBuy}" GroupName="TxType" Margin="0,0,20,0"/>
                                    <RadioButton Content="Sell" GroupName="TxType"/>
                                </StackPanel>
                                <Grid ColumnDefinitions="*,*,*,*" RowDefinitions="Auto">
                                    <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                        <TextBlock Text="Coin ID" FontSize="12" Margin="0,0,0,5"/>
                                        <TextBox Text="{Binding NewTransactionCoinId}" Watermark="bitcoin"/>
                                    </StackPanel>
                                    <StackPanel Grid.Column="1" Margin="0,0,10,0">
                                        <TextBlock Text="Amount" FontSize="12" Margin="0,0,0,5"/>
                                        <TextBox Text="{Binding NewTransactionAmount}" Watermark="0.5"/>
                                    </StackPanel>
                                    <StackPanel Grid.Column="2" Margin="0,0,10,0">
                                        <TextBlock Text="Price Per Unit" FontSize="12" Margin="0,0,0,5"/>
                                        <TextBox Text="{Binding NewTransactionPricePerUnit}" Watermark="50000"/>
                                    </StackPanel>
                                    <StackPanel Grid.Column="3">
                                        <TextBlock Text="Fee" FontSize="12" Margin="0,0,0,5"/>
                                        <TextBox Text="{Binding NewTransactionFee}" Watermark="0"/>
                                    </StackPanel>
                                </Grid>
                                <StackPanel Margin="0,10,0,0">
                                    <TextBlock Text="Notes (optional)" FontSize="12" Margin="0,0,0,5"/>
                                    <TextBox Text="{Binding NewTransactionNotes}" Watermark="Notes..."/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,15,0,0">
                                    <Button Classes="success" Content="Save" Click="OnAddTransaction" Margin="0,0,10,0"/>
                                    <Button Content="Cancel" Click="OnCancelAddTransaction"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>

                        <Border Background="#16162a" CornerRadius="10" Padding="5">
                            <DataGrid ItemsSource="{Binding Transactions}" AutoGenerateColumns="False" IsReadOnly="True" MinHeight="400">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="Date" Binding="{Binding Timestamp, StringFormat=\{0:yyyy-MM-dd HH:mm\}}" Width="140"/>
                                    <DataGridTextColumn Header="Type" Binding="{Binding Type}" Width="70"/>
                                    <DataGridTextColumn Header="Coin" Binding="{Binding CoinId}" Width="100"/>
                                    <DataGridTextColumn Header="Amount" Binding="{Binding Amount, StringFormat=\{0:N4\}}" Width="100"/>
                                    <DataGridTextColumn Header="Price" Binding="{Binding PricePerUnit, StringFormat=\{0:C2\}}" Width="100"/>
                                    <DataGridTextColumn Header="Total" Binding="{Binding TotalValue, StringFormat=\{0:C2\}}" Width="120"/>
                                    <DataGridTextColumn Header="Fee" Binding="{Binding Fee, StringFormat=\{0:C2\}}" Width="80"/>
                                </DataGrid.Columns>
                            </DataGrid>
                        </Border>
                        <StackPanel Orientation="Horizontal" Margin="0,20,0,0">
                            <Button Classes="primary" Content="Refresh" Click="OnRefreshTransactions" Margin="0,0,10,0"/>
                            <Button Classes="success" Content="Export Transactions" Click="OnExportTransactions"/>
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>

                <!-- SETTINGS VIEW -->
                <ScrollViewer IsVisible="{Binding ShowSettingsView}" Padding="30">
                    <StackPanel MaxWidth="600">
                        <TextBlock Text="Settings" FontSize="28" FontWeight="Bold" Margin="0,0,0,30"/>

                        <Border Background="#2d2d4a" CornerRadius="10" Padding="25" Margin="0,0,0,20">
                            <StackPanel>
                                <TextBlock Text="General Settings" FontSize="18" FontWeight="SemiBold" Margin="0,0,0,20"/>
                                <TextBlock Text="Language" FontSize="14" Margin="0,0,0,10"/>
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                                    <RadioButton Content="English" IsChecked="{Binding IsEnglishSelected}" GroupName="Language" Margin="0,0,30,0"/>
                                    <RadioButton Content="Hrvatski" IsChecked="{Binding IsCroatianSelected}" GroupName="Language"/>
                                </StackPanel>
                                <TextBlock Text="Theme" FontSize="14" Margin="0,0,0,10"/>
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                                    <RadioButton Content="Dark" IsChecked="True" GroupName="Theme" Margin="0,0,30,0"/>
                                    <RadioButton Content="Light" GroupName="Theme"/>
                                </StackPanel>
                                <TextBlock Text="Display Currency" FontSize="14" Margin="0,0,0,10"/>
                                <StackPanel Orientation="Horizontal">
                                    <RadioButton Content="USD ($)" IsChecked="True" GroupName="Currency" Margin="0,0,30,0"/>
                                    <RadioButton Content="EUR (â‚¬)" GroupName="Currency"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>

                        <Border Background="#2d2d4a" CornerRadius="10" Padding="25" Margin="0,0,0,20">
                            <StackPanel>
                                <TextBlock Text="Server Settings" FontSize="18" FontWeight="SemiBold" Margin="0,0,0,20"/>
                                <Grid ColumnDefinitions="2*,*" Margin="0,0,0,15">
                                    <StackPanel Grid.Column="0" Margin="0,0,15,0">
                                        <TextBlock Text="Server Address" FontSize="12" Margin="0,0,0,5"/>
                                        <TextBox Text="{Binding ServerAddress}"/>
                                    </StackPanel>
                                    <StackPanel Grid.Column="1">
                                        <TextBlock Text="Port" FontSize="12" Margin="0,0,0,5"/>
                                        <TextBox Text="{Binding ServerPort}"/>
                                    </StackPanel>
                                </Grid>
                                <CheckBox Content="Auto-connect on startup" IsChecked="{Binding AutoConnect}"/>
                            </StackPanel>
                        </Border>

                        <Border Background="#2d2d4a" CornerRadius="10" Padding="25" Margin="0,0,0,20">
                            <StackPanel>
                                <TextBlock Text="Notifications" FontSize="18" FontWeight="SemiBold" Margin="0,0,0,20"/>
                                <CheckBox Content="Enable Price Alerts" IsChecked="{Binding PriceAlertsEnabled}" Margin="0,0,0,10"/>
                                <CheckBox Content="Enable Sound" IsChecked="{Binding SoundEnabled}"/>
                            </StackPanel>
                        </Border>

                        <StackPanel Orientation="Horizontal">
                            <Button Classes="primary" Content="Save Settings" Click="OnSaveSettings" Margin="0,0,10,0"/>
                            <Button Content="Reset to Defaults" Click="OnResetSettings"/>
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>

                <!-- ADMIN VIEW -->
                <ScrollViewer IsVisible="{Binding ShowAdminView}" Padding="30">
                    <StackPanel>
                        <TextBlock Text="Admin Panel" FontSize="28" FontWeight="Bold" Margin="0,0,0,20"/>
                        <WrapPanel Margin="0,0,0,30">
                            <Border Background="#2d2d4a" CornerRadius="10" Padding="20" Margin="0,0,15,15" Width="200">
                                <StackPanel>
                                    <TextBlock Text="Total Users" Foreground="#808090" FontSize="12"/>
                                    <TextBlock Text="{Binding SystemStats.TotalUsers}" FontSize="28" FontWeight="Bold"/>
                                </StackPanel>
                            </Border>
                            <Border Background="#2d2d4a" CornerRadius="10" Padding="20" Margin="0,0,15,15" Width="200">
                                <StackPanel>
                                    <TextBlock Text="Active Users" Foreground="#808090" FontSize="12"/>
                                    <TextBlock Text="{Binding SystemStats.ActiveUsers}" FontSize="28" FontWeight="Bold" Foreground="#00b894"/>
                                </StackPanel>
                            </Border>
                            <Border Background="#2d2d4a" CornerRadius="10" Padding="20" Margin="0,0,15,15" Width="200">
                                <StackPanel>
                                    <TextBlock Text="Tracked Cryptos" Foreground="#808090" FontSize="12"/>
                                    <TextBlock Text="{Binding SystemStats.TrackedCryptos}" FontSize="28" FontWeight="Bold" Foreground="#6c5ce7"/>
                                </StackPanel>
                            </Border>
                        </WrapPanel>
                        <TextBlock Text="User Management" FontSize="20" FontWeight="SemiBold" Margin="0,0,0,15"/>
                        <Border Background="#16162a" CornerRadius="10" Padding="5">
                            <DataGrid ItemsSource="{Binding Users}" AutoGenerateColumns="False" IsReadOnly="True" MinHeight="300">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
                                    <DataGridTextColumn Header="Username" Binding="{Binding Username}" Width="150"/>
                                    <DataGridTextColumn Header="Email" Binding="{Binding Email}" Width="200"/>
                                    <DataGridTextColumn Header="Role" Binding="{Binding Role}" Width="100"/>
                                    <DataGridTextColumn Header="Active" Binding="{Binding IsActive}" Width="80"/>
                                    <DataGridTextColumn Header="Created" Binding="{Binding CreatedAt, StringFormat=\{0:yyyy-MM-dd\}}" Width="120"/>
                                </DataGrid.Columns>
                            </DataGrid>
                        </Border>
                        <StackPanel Orientation="Horizontal" Margin="0,20,0,0">
                            <Button Classes="primary" Content="Refresh" Click="OnRefreshAdmin" Margin="0,0,10,0"/>
                            <Button Classes="success" Content="Refresh Prices" Click="OnAdminRefreshPrices" Margin="0,0,10,0"/>
                            <Button Classes="success" Content="Export Report" Click="OnExportAdminReport"/>
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>
            </Grid>
        </Border>
    </Grid>
</Window>
